## Angular Component - Template  

### 템플릿이란  
Angular는 템플릿과 컴포넌트 클래스로 **뷰와 모델(데이터와 비즈니스 로직)을 분리**한다.  
템플릿은 HTML과 Angular 고유의 템플릿 문법을 사용하여 컴포넌트의 뷰를 정의한다.  
컴포넌트 클래스는 컨트롤러와 뷰모델의 일부를 담당한다.  
뷰와 모델은 분리되어 있지만 **상태는 공유**되어야 한다.  
```
DOM의 상태가 변화 -> 템플릿이 변화를 감지 -> 변화된 상태를 컴포넌트 클래스에 전달  
-> 컴포넌트 클래스가 비즈니스 로직을 실행 -> 템플릿에 실행결과 공유 -> 템플릿이 DOM 업데이트  
```

### 템플릿 문법  

정적인 뷰를 정의하기 위한 HTML + 컴포넌트와 연계된 동적으로 변화하는 뷰를 정의하기 위한 템플릿 문법  
템플릿과 컴포넌트 클래스 간 데이터 공유를 위한 데이터 바인딩과 빌트인 디렉티브를 지원한다.  

- 템플릿 내 사용 금지 항목  
  - script 요소 - 보안 상 문제로 사용 금지  
  - 대입/증감/비트/객체 생성 연산자 - 데이터를 변경할 수 있는 연산은 사용 금지  
  - 전역 스코프를 갖는 빌트인 객체(window, document, location, console 등)


## Data Binding  

구조화 된 웹 애플리케이션을 구축하기 위해서 분리된 뷰와 모델을 하나로 연결하여 유기적으로 동작하게 한다.  
DOM API를 사용하여 DOM을 직접 조작하면 뷰와 모델 간의 관계를 느슨하게 결합하기 어렵고, 뷰가 변경되면 로직도 변경될 가능성이 매우 높다. 하지만 Angular는 템플릿과 컴포넌트 클래스의 상호관계를 선언하여 뷰와 모델의 관계를 관리한다. 이때 사용되는 것이 데이터 바인딩이다. 뷰와 모델을 깔끔하게 분리하고 간결한 코드로 개발이 가능해진다.  

### 변화 감지 (Change Detection)  
뷰와 모델의 동기화를 유지하기 위해 상태의 변화를 감지하고 이를 반영하는 것을 말한다.  
뷰의 상태 변화는 DOM 이벤트를 캐치하는 것으로 감지할 수 있다. 모델의 변화는 컴포넌트 클래스의 프로퍼티 값이 변경되는 것을 말한다. Angular는 어떤 경우에 모델이 변화하는지를 주목한다. 모델이 변화하는 경우는 DOM이벤트, Timer함수, Ajax 통신 등 비동기 처리가 수행될 때이다. 


### 인터폴레이션  
`{{ expression }}`
표현식을 두 개의 중괄호로 열고 닫은 형식. 표현식의 평가 결과를 문자열로 변환하여 템플릿에 바인딩한다. 그러나 템플릿 내부의 표현식에는 컴포넌트 클래스의 프로퍼티를 변경할 수 있는 연산은 금지된다.  

### 프로퍼티 바인딩 & 어트리뷰트 바인딩  
`<element [property]="expression">...</element>`  
프로퍼티 바인딩은 표현식의 평가 결과를 HTML 요소의 DOM 프로퍼티에 바인딩한다.  
`<element [attr.attribute-name]="expression">...</element>`  
어트리뷰트 바인딩은 표현식의 평가 결과를 HTML 어트리뷰트에 바인딩한다.  

- HTML 어트리뷰트(attribute)와 DOM 프로퍼티(property)의 차이  
  어트리뷰트는 HTML 문서에 존재하는 것으로, 값이 변하지 않는다. input 요소에 value 어트리뷰트를 설정했을 때, 사용자의 입력에 의해 상태가 변경된다 해도 value 어트리뷰트는 변경되지 않는다. 그러나 프로퍼티는 DOM 노드 객체에 있는 것으로, 동적으로 변한다. DOM 노드 객체는 상태 변화를 관리하기 위한 프로퍼티를 갖고, value 프로퍼티는 상태 변화에 반응한다. 즉, 어트리뷰트는 DOM 프로퍼티의 **초기 기본값**을 의미하며 DOM 프로퍼티는 **현재의 상태 값**을 의미한다.  

### 클래스 바인딩  
HTML 요소의 class 어트리뷰트에 클래스를 추가 / 삭제 할 수 있다.  

- 단항 클래스 바인딩  
  좌변에는 class 어트리뷰트에 반영할 클래스 이름을 지정하고, 우변에는 참이나 거짓으로 평가되는 표현식을 바인딩한다.  
  `<div [class.active]="isActive">...</div>`
  isActive 의 값이 참이면 클래스 active 를 추가하고, 거짓이면 삭제한다.  

- 다항 클래스 바인딩  
  좌변에는 class 를 지정하고, 우변에는 class 어트리뷰트에 반영할 클래스의 리스트를 바인딩 한다.  
  `<div [class]="my-classes">...</div>`

이미 클래스가 지정되어 있을 때, 단항 클래스 바인딩은 class 어트리뷰트를 병합하여 새로운 class 어트리뷰트를 작성하지만, 다항 클래스 바인딩은 기존의 class 어트리뷰트를 삭제하고 새로운 class 어트리뷰트를 작성한다. 클래스 바인딩은 기존 class 어트리뷰트보다 우선된다.  

### 스타일 바인딩  
HTML 요소의 style 어트리뷰트에 스타일을 지정한다.  
`<div [style.background-color]="'white'">...</div>`  
스타일 바인딩은 기존 style 어트리뷰트보다 우선하며, 스타일 프로퍼티의 이름은 케밥 표기법 또는 카멜 표기법을 사용한다.  

### 이벤트 바인딩  
뷰의 상태 변화에 의해 이벤트가 발생하면 이벤트 핸들러를 호출한다.  
`<element (event)="statement">...</element>`

### 양방향 데이터 바인딩  
뷰와 컴포넌트 클래스의 상태변화를 상호 반영한다.  
`<element [(ngModel)]="property">...</element>`


## Built-in Directive  
디렉티브는 "DOM의 모든 것(모양이나 동작 등)을 관리하기 위한 지시(명령)" 이다.  
HTML 요소 또는 어트리뷰트의 형태로 사용하여 디렉티브가 사용된 요소에게 무언가를 하라는 지시를 전달한다.  

- 컴포넌트 디렉티브  
- 어트리뷰트 디렉티브  
- 구조 디렉티브  

### 어트리뷰트 디렉티브  
- ngClass  
  여러 개의 CSS 클래스를 추가 또는 삭제한다. ngClass 디렉티브는 바인딩된 문자열/배열/객체를 HTML요소의 class 어트리뷰트에 반영한다. 이미 클래스가 지정되어 있을 때에는 class 어트리뷰트를 병합하여 새로운 class 어트리뷰트를 작성한다.  
  - 공백 문자로 구분된 문자열
  `<div [ngClass]="'text-bold color-blue'">...</div>`
  - 요소로 구성된 배열  
  `<div [ngClass]="['text-bold', 'color-blue']">...</div>`  
  - 프로퍼티와 불린 타입 값을 갖는 객체  
  프로퍼티 값이 true 인 프로퍼티만 class 어트리뷰트에 반영된다.  
  `<div [ngClass]="{ 'text-bold': true, 'color-blue': false }">...</div>`


- ngStyle
여러 개의 인라인 스타일을 추가 또는 삭제한다. 바인딩된 객체를 style 어트리뷰트에 반영한다. 이미 스타일이 지정되어 있을 때에는 style 어트리뷰트를 병합하여 새로운 style 어트리뷰트를 작성한다.  
`<div [ngStyle]="{ color: 'red', 'width.px': 100 }"></div>`  


### 빌트인 구조 디렉티브  
DOM 요소를 반복 생성(ngFor), 조건에 의한 추가 또는 제거(ngIf, ngSwitch)를 통해 뷰의 구조를 변경한다. 구조 디렉티브에는 `*` 접두사를 추가하며 `[]`를 사용하지 않는다. 하나의 호스트 요소에는 하나의 구조 디렉티브만을 사용할 수 있다.  

- ngIf  
우변 표현식의 연산결과가 참이면 호스트 요소를 DOM에 추가하고, 거짓이면 DOM에서 제거한다. ngIf 디렉티브에 의해 제거된 요소는 DOM에 남아있지 않고 완전히 제거된다.  
`<element *ngIf="expression">...</element>`  
  - ngIf else  
  ngIf 우변의 표현식이 거짓이면 else 이후에 기술한 ng-template 디렉티브의 자식을 DOM에 추가한다. ng-template 디렉티브에는 else 또는 then 이후에 지정한 템플릿 참조 변수를 지정한다.  

- ngFor  
컴포넌트 클래스의 컬렉션(이터러블 객체)을 반복하여 호스트 요소 및 하위 요소를 DOM에 추가한다. 컬렉션 데이터가 변경되면 컬렉션과 연결된 모든 DOM 요소를 제거하고 다시 생성한다. 컬렉션의 크기가 매우 크면 퍼포먼스 상의 문제가 발생할 수 있으므로, 퍼포먼스를 향상시키기 위한 trackBy 기능을 제공한다.  
`<element *ngFor="let item of items; let i=index">...</element>`  

- ngSwitch  
switch 조건에 따라 여러 요소 중 하나의 요소를 선택하여 DOM에 추가한다. 자바스크립트의 switch문과 유사하게 동작한다.  